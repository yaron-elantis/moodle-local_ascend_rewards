{"version":3,"file":"index_page.min.js","sources":["../src/index_page.js"],"sourcesContent":["import Ajax from 'core/ajax';\nimport Notification from 'core/notification';\n\nlet ajaxRequestFailed = '';\nlet alertConfig = {\n    alertTitle: '',\n    errorTitle: '',\n    closeLabel: ''\n};\n\nconst callAjax = (methodname, args) => {\n    const requests = Ajax.call([{methodname, args}]);\n    return requests && requests[0]\n        ? requests[0]\n        : Promise.reject(new Error(ajaxRequestFailed || ''));\n};\n\nconst formatString = (template, data = {}) => {\n    if (!template || typeof template !== 'string') {\n        return '';\n    }\n    return template.replace(/\\{(\\w+)\\}/g, (match, key) => {\n        if (Object.prototype.hasOwnProperty.call(data, key)) {\n            return data[key];\n        }\n        return '';\n    });\n};\n\nconst showAlert = (message, isError = false) => {\n    if (!message) {\n        return;\n    }\n    const title = isError ? alertConfig.errorTitle : alertConfig.alertTitle;\n    Notification.alert(title || '', message, alertConfig.closeLabel || '');\n};\n\nconst initPanelToggles = () => {\n    document.querySelectorAll('.aa-panel-head').forEach((header) => {\n        header.addEventListener('click', () => {\n            header.classList.toggle('open');\n        });\n    });\n\n    document.querySelectorAll('.xp-ring[data-final-offset]').forEach((ring) => {\n        const offset = ring.getAttribute('data-final-offset');\n        if (offset !== null) {\n            ring.style.setProperty('--final-offset', offset);\n        }\n    });\n};\n\nconst initInstructions = (config) => {\n    const windowName = config?.windowName || 'ascend_instructions';\n    const windowFeatures = config?.windowFeatures || '';\n\n    document.querySelectorAll('.js-instructions-link').forEach((link) => {\n        link.addEventListener('click', (event) => {\n            if (!windowFeatures) {\n                return;\n            }\n            event.preventDefault();\n            const name = link.getAttribute('data-window-name') || windowName;\n            const features = link.getAttribute('data-window-features') || windowFeatures;\n            window.open(link.href, name, features);\n        });\n    });\n};\n\nconst initGameboard = (config) => {\n    const cards = document.querySelectorAll('.gameboard-card:not(.picked)');\n    if (!cards.length) {\n        return;\n    }\n\n    const successText = config?.successText || '';\n    const errorPrefix = config?.errorPrefix || '';\n    const genericError = config?.genericError || '';\n    const processingErrorPrefix = config?.processingErrorPrefix || '';\n    const coinAltLabel = config?.coinAltLabel || '';\n    const coinIconUrl = config?.coinIconUrl || '';\n\n    cards.forEach((card) => {\n        card.addEventListener('click', () => {\n            const position = parseInt(card.getAttribute('data-position') || '0', 10);\n\n            cards.forEach((item) => {\n                item.style.pointerEvents = 'none';\n            });\n\n            callAjax('local_ascend_rewards_gameboard_pick', {position: position})\n                .then((result) => {\n                    if (result && result.success) {\n                        card.style.animation = 'cardFlip 0.6s ease-in-out';\n\n                        setTimeout(() => {\n                            card.classList.add('picked');\n                            card.style.background = '#ffffff';\n                            card.style.cursor = 'default';\n                            card.innerHTML = '<div class=\"gameboard-card-content\">' +\n                                '<img src=\"' + coinIconUrl + '\" alt=\"' + coinAltLabel + '\" class=\"gameboard-card-icon\">' +\n                                '<div class=\"gameboard-card-value\">' + result.coins + '</div>' +\n                                '</div>';\n\n                            const remainingPicks = result.remaining;\n\n                            try {\n                                const audio = document.getElementById('levelUpSound');\n                                if (audio) {\n                                    audio.volume = 0.4;\n                                    audio.currentTime = 0;\n                                    audio.play().catch(() => {});\n                                }\n                            } catch (error) {\n                                // Ignore audio failures.\n                            }\n\n                            setTimeout(() => {\n                                showAlert(formatString(successText, {coins: result.coins}));\n\n                                if (remainingPicks === 0) {\n                                    window.location.reload();\n                                } else {\n                                    cards.forEach((item) => {\n                                        if (!item.classList.contains('picked')) {\n                                            item.style.pointerEvents = 'auto';\n                                        }\n                                    });\n                                }\n                            }, 800);\n                        }, 600);\n                    } else {\n                        const message = (result && result.error) || genericError;\n                        showAlert(errorPrefix + message, true);\n                        cards.forEach((item) => {\n                            item.style.pointerEvents = 'auto';\n                        });\n                    }\n                })\n                .catch((error) => {\n                    showAlert(processingErrorPrefix + (error?.message || ''), true);\n                    cards.forEach((item) => {\n                        item.style.pointerEvents = 'auto';\n                    });\n                });\n        });\n    });\n};\n\nconst initBadgeModal = (config) => {\n    const modal = document.getElementById('apxModal');\n    const backdrop = document.getElementById('apxModalBackdrop');\n    const closeBtn = document.getElementById('apxModalClose');\n    const video = document.getElementById('apxRewardVideo');\n    const videoSource = document.getElementById('apxRewardVideoSource');\n    const fullscreenBtn = document.getElementById('apxVideoFullscreen');\n\n    if (!modal || !backdrop) {\n        return;\n    }\n\n    const badgeVideos = config?.badgeVideos || {};\n    const metaBadgeIds = config?.metaBadgeIds || [];\n    const knownBadgeNames = config?.knownBadgeNames || [];\n    const awardLabelPrefix = config?.awardLabelPrefix || '';\n    const awardLabelSuffix = config?.awardLabelSuffix || '';\n    const xpLabel = config?.xpLabel || '';\n    const coinsLabel = config?.coinsLabel || '';\n    const assetsLabel = config?.assetsLabel || '';\n    const badgeCategoryDefault = config?.badgeCategoryDefault || '';\n    const failedLabel = config?.failedLabel || '';\n    const passedLabel = config?.passedLabel || '';\n\n    const q = (selector) => document.querySelector(selector);\n\n    const closeModal = () => {\n        modal.style.display = 'none';\n        backdrop.style.display = 'none';\n        document.body.style.overflow = '';\n        if (video) {\n            video.pause();\n            video.style.display = 'none';\n        }\n        if (fullscreenBtn) {\n            fullscreenBtn.style.display = 'none';\n        }\n    };\n\n    const openModal = (el) => {\n        const d = el.dataset;\n        q('#apxBName').textContent = d.badge || '';\n        q('#apxBCategory').textContent = d.category || badgeCategoryDefault;\n        q('#apxBCourse').textContent = d.course || '';\n        q('#apxBWhen').textContent = d.when || '';\n        q('#apxBWhy').textContent = d.why || '';\n\n        const coinsText = d.coins || `+0 ${assetsLabel}`;\n        const coins = parseInt(coinsText.match(/\\d+/)) || 0;\n        const xpValue = d.xp ? parseInt(d.xp, 10) : Math.floor(coins / 2);\n\n        q('#apxBXP').textContent = `+${xpValue} ${xpLabel}`;\n        q('#apxBCoins').textContent = coinsText || `+0 ${coinsLabel}`;\n\n        const courseId = parseInt(d.courseid || '0', 10);\n        const badgeId = parseInt(d.badgeid || '0', 10);\n        const isMeta = metaBadgeIds.includes(badgeId);\n\n        const activitiesDiv = q('#apxBActivities');\n        const badgesDiv = q('#apxBBadges');\n        const activitiesList = q('#apxBActivitiesList');\n        const badgesList = q('#apxBBadgesList');\n\n        if (activitiesDiv) {\n            activitiesDiv.classList.add('aa-hidden');\n        }\n        if (badgesDiv) {\n            badgesDiv.classList.add('aa-hidden');\n        }\n\n        if (courseId > 0) {\n            callAjax('local_ascend_rewards_get_activities', {courseid: courseId, badgeid: badgeId, force: 1})\n                .then((data) => {\n                    if (data && data.activities && data.activities.length > 0) {\n                        const areBadges = data.activities.some((item) => knownBadgeNames.includes(item));\n\n                        if (isMeta || areBadges) {\n                            if (badgesList) {\n                                badgesList.innerHTML = '';\n                                data.activities.forEach((badge) => {\n                                    const li = document.createElement('li');\n                                    li.className = 'apx-badge-item';\n                                    li.textContent = badge;\n                                    badgesList.appendChild(li);\n                                });\n                            }\n                            if (badgesDiv) {\n                                badgesDiv.classList.remove('aa-hidden');\n                            }\n                            if (activitiesDiv) {\n                                activitiesDiv.classList.add('aa-hidden');\n                            }\n                        } else {\n                            if (activitiesList) {\n                                activitiesList.innerHTML = '';\n\n                                const metadata = data.metadata || [];\n                                const hasMetadata = metadata.length > 0;\n                                let currentAward = 0;\n\n                                data.activities.forEach((activity, index) => {\n                                    const meta = hasMetadata ? metadata[index] : null;\n\n                                    if (meta && meta.award_number && meta.award_number !== currentAward) {\n                                        if (currentAward > 0) {\n                                            const spacer = document.createElement('li');\n                                            spacer.className = 'apx-award-spacer';\n                                            activitiesList.appendChild(spacer);\n                                        }\n\n                                        const header = document.createElement('li');\n                                        header.className = 'apx-award-header';\n\n                                        const badgeCount = document.createElement('span');\n                                        badgeCount.className = 'aa-badge-count apx-award-count';\n                                        badgeCount.textContent = `x${meta.award_number}`;\n\n                                        header.appendChild(badgeCount);\n                                        header.appendChild(document.createTextNode(`${awardLabelPrefix}${meta.award_number}${awardLabelSuffix}`));\n                                        activitiesList.appendChild(header);\n\n                                        currentAward = meta.award_number;\n                                    }\n\n                                    const li = document.createElement('li');\n                                    li.className = 'apx-activity-item';\n\n                                    if (meta && meta.failed_grade !== undefined && meta.passed_grade !== undefined) {\n                                        li.innerHTML = `<span class=\\\"apx-activity-failed\\\">${failedLabel} (${meta.failed_grade}%)</span> -> ` +\n                                            `<span class=\\\"apx-activity-passed\\\">${passedLabel} (${meta.passed_grade}%)</span><br/>` +\n                                            `<span class=\\\"apx-activity-indent\\\">${activity}</span>`;\n                                    } else if (meta && meta.old_grade !== undefined && meta.new_grade !== undefined) {\n                                        li.innerHTML = `${activity} <span class=\\\"apx-activity-improved\\\">(${meta.old_grade}% -> ${meta.new_grade}%)</span>`;\n                                    } else {\n                                        li.textContent = activity;\n                                    }\n\n                                    activitiesList.appendChild(li);\n                                });\n                            }\n\n                            if (activitiesDiv) {\n                                activitiesDiv.classList.remove('aa-hidden');\n                            }\n                            if (badgesDiv) {\n                                badgesDiv.classList.add('aa-hidden');\n                            }\n                        }\n                    } else {\n                        if (activitiesDiv) {\n                            activitiesDiv.classList.add('aa-hidden');\n                        }\n                        if (badgesDiv) {\n                            badgesDiv.classList.add('aa-hidden');\n                        }\n                    }\n                })\n                .catch(() => {\n                    if (activitiesDiv) {\n                        activitiesDiv.classList.add('aa-hidden');\n                    }\n                    if (badgesDiv) {\n                        badgesDiv.classList.add('aa-hidden');\n                    }\n                });\n        }\n\n        const videoFile = badgeVideos[badgeId] || 'reward_animation_2.mp4';\n        const videoUrl = `${M.cfg.wwwroot}/local/ascend_rewards/pix/${videoFile}`;\n\n        if (video && videoSource) {\n            videoSource.src = videoUrl;\n            video.load();\n            video.style.display = 'block';\n            video.currentTime = 0;\n            video.play().catch(() => {});\n            if (fullscreenBtn) {\n                fullscreenBtn.style.display = 'block';\n            }\n        }\n\n        modal.style.display = 'block';\n        backdrop.style.display = 'block';\n        document.body.style.overflow = 'hidden';\n    };\n\n    document.querySelectorAll('.js-badge-detail').forEach((el) => {\n        el.addEventListener('click', () => openModal(el));\n    });\n\n    if (closeBtn) {\n        closeBtn.addEventListener('click', closeModal);\n    }\n    backdrop.addEventListener('click', closeModal);\n\n    document.addEventListener('keydown', (event) => {\n        if (event.key === 'Escape' && modal.style.display === 'block') {\n            closeModal();\n        }\n    });\n\n    if (fullscreenBtn && video) {\n        fullscreenBtn.addEventListener('click', () => {\n            if (video.requestFullscreen) {\n                video.requestFullscreen();\n            } else if (video.webkitRequestFullscreen) {\n                video.webkitRequestFullscreen();\n            } else if (video.webkitEnterFullscreen) {\n                video.webkitEnterFullscreen();\n            } else if (video.msRequestFullscreen) {\n                video.msRequestFullscreen();\n            }\n        });\n    }\n};\n\nconst initLeaderboard = (config) => {\n    const btnTopView = document.getElementById('btnTopView');\n    const btnContextView = document.getElementById('btnContextView');\n    const leaderboardList = document.getElementById('leaderboardList');\n    const leaderboardMode = document.getElementById('leaderboardMode');\n\n    if (!leaderboardList || !leaderboardMode) {\n        return;\n    }\n\n    const courseId = Number(config?.courseId ?? 0);\n    const userId = Number(config?.userId ?? 0);\n    const leaderboardRangeLabel = config?.leaderboardRangeLabel || '';\n    const leaderboardModeLabel = config?.leaderboardModeLabel || '';\n    const leaderboardLoadingLabel = config?.leaderboardLoadingLabel || '';\n    const leaderboardContextErrorLabel = config?.leaderboardContextErrorLabel || '';\n    const leaderboardContextViewErrorLabel = config?.leaderboardContextViewErrorLabel || '';\n    const youLabel = config?.youLabel || '';\n    const userNumberPrefix = config?.userNumberPrefix || '';\n    const userIdBadgeLabel = config?.userIdBadgeLabel || '';\n\n    const originalHTML = leaderboardList.innerHTML;\n\n    const switchToContextView = () => {\n        leaderboardList.innerHTML = `<li class=\"aa-muted aa-leaderboard-loading\"><i class=\"fa-solid fa-spinner fa-spin\"></i> ${leaderboardLoadingLabel}</li>`;\n\n        callAjax('local_ascend_rewards_get_leaderboard_context', {courseid: courseId})\n            .then((data) => {\n                if (!data.success || !data.users) {\n                    leaderboardList.innerHTML = `<li class=\"aa-muted\">${leaderboardContextErrorLabel}</li>`;\n                    return;\n                }\n\n                let html = '';\n                data.users.forEach((user, idx) => {\n                    const isCurrentUser = user.is_current_user;\n                    const displayName = isCurrentUser ? youLabel : `${userNumberPrefix}${user.userid}`;\n                    const userIdBadge = isCurrentUser\n                        ? `<span class=\"user-id-badge\">${userIdBadgeLabel} ${userId}</span>`\n                        : '';\n                    const medal = user.medal;\n                    const xp = user.xp.toLocaleString();\n                    const currentClass = isCurrentUser ? ' class=\"current-user\"' : '';\n                    const gradId = `xpIconGradLBCtx${idx}`;\n\n                    html += `<li${currentClass}>`;\n                    html += `<span class=\"pos\">${medal}</span>`;\n                    html += `<strong>${displayName}</strong>`;\n                    html += userIdBadge;\n                    html += '<div class=\"xp-display xp-display-right\">';\n                    html += '<svg width=\"24\" height=\"24\" viewBox=\"0 0 80 80\" class=\"xp-icon\">';\n                    html += `<defs><linearGradient id=\"${gradId}\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">`;\n                    html += '<stop offset=\"0%\" stop-color=\"#00D4FF\" />';\n                    html += '<stop offset=\"50%\" stop-color=\"#FF00AA\" />';\n                    html += '<stop offset=\"100%\" stop-color=\"#FF9500\" /></linearGradient></defs>';\n                    html += `<circle cx=\"40\" cy=\"40\" r=\"36\" fill=\"url(#${gradId})\" />`;\n                    html += '<text x=\"40\" y=\"52\" text-anchor=\"middle\" fill=\"#01142E\" font-size=\"32\" font-weight=\"800\">X</text>';\n                    html += '</svg>';\n                    html += `<span class=\"aa-muted aa-xp-value\">${xp}</span>`;\n                    html += '</div>';\n                    html += '</li>';\n                });\n\n                leaderboardList.innerHTML = html;\n                leaderboardMode.textContent = formatString(leaderboardRangeLabel, {\n                    start: data.start_rank,\n                    end: data.end_rank,\n                    total: data.total_users\n                });\n\n                setTimeout(() => {\n                    const currentUserLi = leaderboardList.querySelector('li.current-user');\n                    if (currentUserLi) {\n                        currentUserLi.scrollIntoView({behavior: 'smooth', block: 'center'});\n                    }\n                }, 100);\n\n                if (btnTopView) {\n                    btnTopView.classList.remove('is-active');\n                }\n                if (btnContextView) {\n                    btnContextView.classList.add('is-active');\n                }\n            })\n            .catch(() => {\n                leaderboardList.innerHTML = `<li class=\"aa-muted\">${leaderboardContextViewErrorLabel}</li>`;\n            });\n    };\n\n    const switchToTopView = () => {\n        leaderboardList.innerHTML = originalHTML;\n        leaderboardMode.textContent = leaderboardModeLabel;\n\n        if (btnTopView) {\n            btnTopView.classList.add('is-active');\n        }\n        if (btnContextView) {\n            btnContextView.classList.remove('is-active');\n        }\n    };\n\n    if (btnContextView) {\n        btnContextView.addEventListener('click', switchToContextView);\n    }\n    if (btnTopView) {\n        btnTopView.addEventListener('click', switchToTopView);\n    }\n};\n\nexport const init = (config) => {\n    const alerts = config?.alerts || {};\n    alertConfig = {\n        alertTitle: alerts.alertTitle || '',\n        errorTitle: alerts.errorTitle || alerts.alertTitle || '',\n        closeLabel: alerts.closeLabel || ''\n    };\n    ajaxRequestFailed = alerts.ajaxRequestFailed || '';\n\n    initPanelToggles();\n    initInstructions(config?.instructions || {});\n    initGameboard(config?.gameboard || {});\n    initBadgeModal(config?.badgeModal || {});\n    initLeaderboard(config?.leaderboard || {});\n};\r\n"],"names":["ajaxRequestFailed","alertConfig","alertTitle","errorTitle","closeLabel","callAjax","methodname","args","requests","Ajax","call","Promise","reject","Error","formatString","template","data","replace","match","key","Object","prototype","hasOwnProperty","showAlert","message","isError","title","alert","initBadgeModal","config","modal","document","getElementById","backdrop","closeBtn","video","videoSource","fullscreenBtn","badgeVideos","metaBadgeIds","knownBadgeNames","awardLabelPrefix","awardLabelSuffix","xpLabel","coinsLabel","assetsLabel","badgeCategoryDefault","failedLabel","passedLabel","q","selector","querySelector","closeModal","style","display","body","overflow","pause","querySelectorAll","forEach","el","addEventListener","d","dataset","textContent","badge","category","course","when","why","coinsText","coins","parseInt","xpValue","xp","Math","floor","courseId","courseid","badgeId","badgeid","isMeta","includes","activitiesDiv","badgesDiv","activitiesList","badgesList","classList","add","force","then","activities","length","areBadges","some","item","innerHTML","li","createElement","className","appendChild","remove","metadata","hasMetadata","currentAward","activity","index","meta","award_number","spacer","header","badgeCount","createTextNode","undefined","failed_grade","passed_grade","old_grade","new_grade","catch","videoFile","videoUrl","M","cfg","wwwroot","src","load","currentTime","play","openModal","event","requestFullscreen","webkitRequestFullscreen","webkitEnterFullscreen","msRequestFullscreen","alerts","toggle","ring","offset","getAttribute","setProperty","windowName","windowFeatures","link","preventDefault","name","features","window","open","href","initInstructions","instructions","cards","successText","errorPrefix","genericError","processingErrorPrefix","coinAltLabel","coinIconUrl","card","position","pointerEvents","result","success","animation","setTimeout","background","cursor","remainingPicks","remaining","audio","volume","error","location","reload","contains","initGameboard","gameboard","badgeModal","btnTopView","btnContextView","leaderboardList","leaderboardMode","Number","userId","leaderboardRangeLabel","leaderboardModeLabel","leaderboardLoadingLabel","leaderboardContextErrorLabel","leaderboardContextViewErrorLabel","youLabel","userNumberPrefix","userIdBadgeLabel","originalHTML","switchToContextView","users","html","user","idx","isCurrentUser","is_current_user","displayName","userid","userIdBadge","medal","toLocaleString","currentClass","gradId","start","start_rank","end","end_rank","total","total_users","currentUserLi","scrollIntoView","behavior","block","switchToTopView","initLeaderboard","leaderboard"],"mappings":"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"}