define("local_ascend_rewards/avatar_section",["exports","core/modal_factory","core/modal_events","local_ascend_rewards/avatar_modals"],(function(_exports,_modal_factory,_modal_events,_avatar_modals){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_modal_factory=_interopRequireDefault(_modal_factory),_modal_events=_interopRequireDefault(_modal_events);const VIDEO_MAP={"amazon.png":"amazon.mp4","elf.png":"elf.mp4","ent.png":"ent.mp4","guardian.png":"guardian.mp4","imp.png":"imp.mp4","jester.png":"jester.mp4","magician.png":"magician.mp4","mermaid.png":"mermaid.mp4","nomad.png":"nomad.mp4","philosopher.png":"philosopher.mp4","pirate.png":"pirate.mp4","queen.png":"queen.mp4","sorceress.png":"sorceress.mp4","viking.png":"viking.mp4","warrior.png":"warrior.mp4","wizard.png":"wizard.mp4","maori.png":"maori.mp4","zulu.png":"zulu.mp4","sentinel.png":"sentinel.mp4","kapu.png":"kapu.mp4","beserker.png":"beserker.mp4"},PET_VIDEO_MAP={100:"lynx.mp4",101:"tortoise.mp4",102:"hamster.mp4",103:"falcon.mp4",104:"gryphon.mp4",105:"boar.mp4",106:"viper.mp4",107:"swan.mp4",108:"mischiefcap.mp4",109:"otter.mp4",110:"kinkajou.mp4",111:"seahorse.mp4",112:"dragon.mp4",113:"mastiff.mp4",114:"raven.mp4",115:"tiger.mp4",116:"wolf.mp4",117:"polar_bear.mp4",200:"cheetah_bros.mp4",201:"monkey.mp4",202:"heron.mp4"},VILLAIN_VIDEO_MAP={elf_dryad:"elf_dryad.mp4",ent_blightmind:"ent_blightmind.mp4",jester_mourner:"jester_mourner.mp4",magician_spellbreaker:"magician_spellbreaker.mp4",nomad_dune:"nomad_dune.mp4",philosopher_mirror:"philosopher_mirror.mp4",mermaid_duchess:"mermaid_duchess.mp4",warrior_warlord:"warrior_warlord.mp4",sorceress_stormveil:"sorceress_stormveil.mp4",gatekeeper_wraith:"gatekeeper_wraith.mp4",viking_betrayer:"viking_betrayer.mp4",pirate_barron:"pirate_barron.mp4",amazon_huntsmistress:"amazon_huntsmistress.mp4",imp_mole:"imp_mole.mp4",wizard_pale_scholar:"wizard_pale_scholar.mp4",maori_shaman:"maori_shaman.mp4",zulu_witchdoctor:"zulu_witchdoctor.mp4",sentinel_void:"sentinel_void.mp4",kapu_judge:"kapu_judge.mp4"};_exports.init=config=>{var _config$tokensAvailab,_config$coinBalance;if(!document.querySelector("#a_avatars"))return;const tokensAvailable=Number(null!==(_config$tokensAvailab=null==config?void 0:config.tokensAvailable)&&void 0!==_config$tokensAvailab?_config$tokensAvailab:0),coinBalance=Number(null!==(_config$coinBalance=null==config?void 0:config.coinBalance)&&void 0!==_config$coinBalance?_config$coinBalance:0),storyFallbackTitle=(null==config?void 0:config.storyFallbackTitle)||"",modalStrings=(null==config?void 0:config.modalStrings)||{};(0,_avatar_modals.init)({strings:modalStrings}),document.querySelectorAll("[data-header-color]").forEach((el=>{const color=el.getAttribute("data-header-color");color&&(el.style.color=color)})),document.querySelectorAll(".avatar-level-content[data-content-opacity]").forEach((el=>{const opacity=el.getAttribute("data-content-opacity"),pointer=el.getAttribute("data-content-pointer");null!==opacity&&""!==opacity&&(el.style.opacity=opacity),pointer&&(el.style.pointerEvents=pointer)})),document.querySelectorAll("[data-font-family]").forEach((el=>{const fontFamily=el.getAttribute("data-font-family");fontFamily&&(el.style.fontFamily=fontFamily)})),document.querySelectorAll("[data-filter]").forEach((el=>{const filter=el.getAttribute("data-filter");filter&&(el.style.filter=filter)})),document.querySelectorAll("[data-cursor]").forEach((el=>{const cursor=el.getAttribute("data-cursor");cursor&&(el.style.cursor=cursor)})),document.querySelectorAll("[data-coin-size]").forEach((el=>{const size=el.getAttribute("data-coin-size");size&&(el.style.width=size)})),document.querySelectorAll(".avatar-card").forEach((card=>{card.addEventListener("click",(()=>{const avatar=card.getAttribute("data-avatar"),name=card.getAttribute("data-name"),level=Number(card.getAttribute("data-level")||0),isUnlocked=card.classList.contains("unlocked"),videoFile=VIDEO_MAP[avatar]||"elf.mp4";isUnlocked?(0,_avatar_modals.showAvatarReviewModal)(avatar,name,videoFile):(0,_avatar_modals.showAvatarUnlockModal)(name,avatar,videoFile,level,tokensAvailable)}))})),document.querySelectorAll(".pet-card").forEach((card=>{card.addEventListener("click",(()=>{const petId=Number(card.getAttribute("data-pet-id")),petName=card.getAttribute("data-pet-name"),petPrice=Number(card.getAttribute("data-pet-price")),canUnlock="1"===card.getAttribute("data-can-unlock"),isOwned=card.classList.contains("owned"),petVideo=PET_VIDEO_MAP[petId]||"lynx.mp4";isOwned?(0,_avatar_modals.showPetReviewModal)(petName,petId,petVideo):canUnlock&&(0,_avatar_modals.showPetUnlockModal)(petId,petName,petPrice,petVideo,tokensAvailable,coinBalance)}))})),document.querySelectorAll(".villain-card").forEach((card=>{card.addEventListener("click",(()=>{const villainId=Number(card.getAttribute("data-villain-id")),villainName=card.getAttribute("data-villain-name"),villainPrice=Number(card.getAttribute("data-villain-price")),villainImageName=card.getAttribute("data-villain-icon"),canUnlock="1"===card.getAttribute("data-can-unlock"),isOwned=card.classList.contains("owned"),videoKey=villainImageName?villainImageName.replace(".png",""):"",villainVideo=VILLAIN_VIDEO_MAP[videoKey]||"elf_dryad.mp4";isOwned?(0,_avatar_modals.showVillainReviewModal)(villainName,villainId,villainImageName,villainVideo):canUnlock&&(0,_avatar_modals.showVillainUnlockModal)(villainId,villainName,villainPrice,villainImageName,villainVideo,tokensAvailable,coinBalance)}))})),document.querySelectorAll(".watch-story-btn").forEach((btn=>{btn.addEventListener("click",(()=>{const youtubeId=btn.getAttribute("data-youtube-id"),setName=btn.getAttribute("data-set-name")||btn.textContent||"",fallbackTitle=storyFallbackTitle||setName||"";(async(title,youtubeId)=>{if(!youtubeId)return;const modal=await _modal_factory.default.create({type:_modal_factory.default.types.DEFAULT,title:title,body:'<div class="aa-youtube-modal-body">\n            <iframe\n                width="100%"\n                height="600"\n                src="https://www.youtube-nocookie.com/embed/'.concat(encodeURIComponent(youtubeId),'?autoplay=1&rel=0&modestbranding=1&fs=1"\n                title="').concat(title,'"\n                frameborder="0"\n                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"\n                allowfullscreen\n                class="aa-youtube-modal-iframe">\n            </iframe>\n        </div>')});modal.getRoot().addClass("aa-youtube-modal"),modal.show(),modal.getRoot().on(_modal_events.default.hidden,(()=>{modal.destroy()}))})(setName.trim()||fallbackTitle||"",youtubeId)}))}))}}));

//# sourceMappingURL=avatar_section.min.js.map